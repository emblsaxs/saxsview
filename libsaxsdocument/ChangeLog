2015-03-23  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/atsas_out.c: Allow files without a footer section

2015-03-23  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsdocument.c: Add a member to the saxs_document struct recording the format used
	* src/saxsdocument.h: Add a function to read out the name of the format used

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/atsas_dat.c: Check for memory allocation errors etc
	* src/malvern_txt.c: Check for memory allocation errors etc

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsdocument.c: Check for memory allocation errors etc
	* src/saxsdocument.h: Add int return code to saxs_curve_add_data

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsproperty.c: Check for memory allocation errors, add assertions that property lists are valid

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/columns.c (saxs_reader_columns_(count|values)): Check for memory allocation errors and return an error code on failure
	* src/columns.h: Document these changes in the Doxygen comments

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsdocument.[ch]: Added const qualifiers to functions which do not modify their arguments
	* src/saxsdocument_format.[ch]: ditto
	* src/saxsproperty.[ch]: ditto
	* src/columns.[ch]: ditto

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsdocument.c: Allow x_err and y_err to be negative, but don't allow Infinity or NaN
	* src/atsas_out.c: Skip data lines with infinity or NaN

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/columns.c: Fixed mistaken assertion

2015-03-20  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/columns.c: Fixed off-by-one error

2015-03-19  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/saxsdocument.c (saxs_document_read): Don't accept a document that has no curves
	* src/columns.c: Added lots of assertions to catch invalid uses of lines structures
	* src/atsas_fir_fit.c: Check whether the data section is NULL before counting the columns
	* src/columns.h: Added assertion functions / macros to allow other code to check validity of lines and columns
	* src/atsas_out.c: Added some assertions and fixed a bug that was causing crashing
	* src/atsas_out.c: Only accept files with the sections in the correct order
	* src/saxsproperty.c: Check the return value of malloc
	* src/saxsdocument.c: Add assertions for valid curves
	* src/columns.c: Check the return value of malloc/realloc

2015-03-18  Chris Kerr  <cjkerr@users.sourceforge.net>

	* src/columns.c (lines_read): Added checks for malloc returning NULL
	* src/atsas_out.c: Check for buffer overruns in extract and extract_line
	* src/atsas_int.c: Check for parse errors

2014-11-05  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (atsas_out_read): Fixed recognition of footer.

2014-10-31  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (atsas_out_read): In a multi-run .out file,
	read the last section.

2014-09-26  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_fir_fit.c (atsas_fit_4_column_write_data): New.
	(atsas_fit_4_column_write): New.
	(saxs_document_format_register_atsas_fir_fit): Register new writer.

2014-09-05  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.c (saxs_document_format_init): Register file formats
	in order of the more specific to the less specific.

2014-07-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (parse_basic_information): Avoid negative string
	length for copy.

2014-06-12  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (parse_header): Handle first/last instead of skip/omit.

2014-06-09  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (is_utf8): New.
	(is_utf16_le): New.
	(is_utf16_be): New.
	(is_utf32_le): New.
	(is_utf32_be): New.
	(lines_read): Check for unicode, error out if unsupported.

2014-06-01  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c: Bumped copyright years.
	(parse_header): Also recognize omitted points at the beginning and end.

2014-05-27  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_fir_fit.c (atsas_fit_3_column_write_data): Fixed writing of
	the actual fit data.

2014-05-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (parse_header): Temporarily handle new style .out
	files inline - this needs more thought and a better implementation
	but works for now.

2014-05-06  Daniel Franke  <dfranke@users.sourceforge.net>

	* fortran/fsaxsdocument.f90 (saxs_document_data): Removed type argument,
	removed all OPTIONAL attributes, added more error checking.

2014-05-06  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_fir_fit.c (atsas_fit_write_header): New.
	(atsas_fit_3_column_write_data): New.
	(atsas_fit_3_column_write): New.
	(saxs_document_format_register_atsas_fir_fit): Enabled writing of 3-column
	fit files.

2014-01-26  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/saxsdocument_format.h (saxs_document_format): Synchronized
	prototypes of read/write callbacks
	* src/saxsdocument.c (saxs_document_write): Handle intermediate
	line representation.
	* src/columns.h (saxs_writer_columns_write_file): Renamed to ...
	(saxs_writer_columns_write_lines): ... this. Changed filename argument
	to lines. Updated all callers.
	* src/columns.c (saxs_writer_columns_write_file): Renamed to ...
	(saxs_writer_columns_write_lines): ... this. Simplified code.

2014-01-26  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/saxsdocument.h (saxs_curve_has_y_err): New.
	* src/saxsdocument.c (saxs_curve_has_y_err): New.
	(saxs_document_write): Made more symmetric to reading, try to find an
	alternative format if the specified format didn't work.
	* src/atsas_dat.c (atsas_dat_3_column_write_data): Verify that the
	available data matches the format.
	(atsas_dat_4_column_write_data): Likewise.
	(atsas_dat_n_column_write_data): Likewise.
	* src/columns.c (saxs_writer_columns_write_file): Fixed callback return
	value checks.

2014-01-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (columns_tokenize): Replaced isfinite by !isnan && !isinf
	to make it compile on CentOS without extra compiler flags.

2014-01-07  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (columns_tokenize): Only assign the data pointer once
	data was actually found.
	(saxs_reader_columns_parse_lines): Attempt to parse only if there is
	actually something to parse.

2014-01-07  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (columns_tokenize): Verify that only finite values are
	used and no INFs pass through.
	* src/cansas_xml.c: Suppress unrelated error messages.

2013-12-02  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns.c (saxs_reader_columns_count): Tokenize line if not done yet.
	(saxs_reader_columns_scan): Removed explicit tokenation.

2013-11-30  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns.c (columns_tokenize): Ignore lines with NAN values.

2013-11-26  Al Kikhney  <plmnnk@users.sourceforge.net>

	* saxsdocument.h (saxs_document_write): Updated documentation.

2013-11-19  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.h (struct line): Cache the column values.
	(saxs_reader_columns_values): New.
	* src/columns.c (lines_create): Initialise the column values.
	(lines_printf): Reset column values.
	(lines_free): Free column values.
	(columns_tokenize): New; does what saxs_reader_columns_count used to do.
	(saxs_reader_columns_count): Only return cached column count.
	(saxs_reader_columns_values): New, return cached column values.
	(saxs_reader_columns_scan): Tokenize lines.
	(columns_parse): Removed.
	(saxs_reader_columns_parse): Use cached values.

2013-11-19  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.h (struct line): Cache the column count.
	* src/columns.c (lines_create): Initialise the column count.
	(lines_printf): Reset column count.
	(saxs_reader_columns_count): Cache the number of columns counted,
	return cached value if available.

2013-11-18  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (atsas_out_read): Compare the whole line to find
	identifiers.

2013-08-27  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (parse_basic_information): Re-use code as description
	if no description was found.

2013-08-05  Al Kikhney  <plmnnk@users.sourceforge.net>

	* src/atsas_out.c (parse_scattering_data): Read the regularized curve 
	(J REG) in addition to the desmeared curve (I REG).

2013-06-09  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (lines_write): Check for and stop after errors
	on write, e.g. on disk full.
	* src/atsas_dat.c (atsas_header_txt_read): Make sure that a header
	contains at least one key-value pair, thus avoid empty files.

2013-04-30  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (atsas_out_read): Scan the input lines for multiple data
	sections. Reject the file as ENOTSUP if multiple sections are found.

2013-04-25  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/malvern_txt.c (malvern_txt_parse_data): Removed left
	over debug statement.

2013-04-25  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/saxsdocument.h (saxs_document_copy_curve): New.
	(saxs_curve_compare): New.
	(saxs_curve_set_title): New.
	* src/saxsdocument.c (saxs_document_copy_curve): New.
	(saxs_curve_compare): New.
	(saxs_curve_set_title): New.
	* src/malvern_txt.c (malvern_txt_count_columns): New.
	(malvern_txt_parse_column_headers): Use new function.
	(malvern_txt_parse_column_values): Parse as many columns
	as there are, do not drop perceived duplicates.
	(malvern_txt_parse_data): Read everything into a temporary
	document, then copy non-duplicate curves and set the correct
	titles.

2013-04-23  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (atsas_dat_write_header): When writing the header,
	make sure that all basic fields are there, even if empty.

2013-04-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c: Bumped copyright years.
	(parse_basic_information): Reduced maximum copy-to size to avoid a
	potentially not null-terminated string (from coverity).
	* src/malvern_txt.c (malvern_txt_read): Fixed wrong pointer increment
	(from coverity).

2013-04-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c: Bumped copyright years.
	(saxs_reader_columns_scan): Avoid to skip the first data line while
	trying to find the relevant data block.

2013-04-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (atsas_dat_parse_header): Also trim the first
	whitespace.

2013-04-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (atsas_dat_n_column_parse_data): Fixed out-of-date
	comment.
	* src/columns.c (saxs_reader_columns_parse_lines): Fixed broken logic.

2013-03-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (atsas_out_read): Recognize job types 5 and 6.

2013-03-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* malvern_txt.c (malvern_txt_parse_column_values): Merge two or more
	columns with identical data to remove the duplicates.

2013-03-13  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_out.c (extract_line): When trimming trailing whitespace,
	stop when the beginning of the string is reached.

2013-02-28  Daniel Franke  <dfranke@users.sourceforge.net>

	* python/pysaxsdocument.c (PySaxsDocument_Read): Fixed leaking
	references.

2013-02-28  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (atsas_dat_parse_footer): Verify that we have all the
	basic information, otherwise, try to get the rest.

2013-02-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (lines_read): Trim trailing whitespace.

2013-02-03  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (lines_read): Simplified, do not replace TABs.

2013-02-03  Daniel Franke  <dfranke@users.sourceforge.net>

	* src_malvern.txt (malvern_txt_parse_column_headers): New.
	(malvern_txt_parse_column_values): New.
	(malvern_txt_parse_data): Removed hardcoded columns, add as many
	curves as there are columns using the column label as curve title.
	(malvern_txt_read): Simplified data detection.

2013-01-29  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (lines_read): Trim leading '#' comment indicators.
	* src/atsas_dat.c (parse_basic_information): Fixed indentation.
	(parse_key_value_pair): Special cased a "code" key.
	(atsas_dat_parse_header): Special cased the description line.

2012-11-02  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (lines_read): Avoid realloc when increasing the line size,
	explicitly initialize trailing bytes.

2012-09-27  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/CMakeLists.txt: Explicitely link libm.

2012-09-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* fortran/fsaxsdocument.f90 (saxs_document_data): Added optional parameter to
	select the k-th data curve.

2012-09-03  Daniel Franke  <dfranke@users.sourceforge.net>

	* fortran/CMakeLists.txt: Do not install static bindings library.

2012-08-27  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c: Bumped copyright years.
	(issep): Also check for whitespace.
	(saxs_reader_columns_count): Improved column detection.
	(columns_parse): Likewise.
	* src/csv.c (csv_parse_data): Create more useful curve titles.

2012-08-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/malvern_txt.c (malvern_txt_parse_data): Replaced NAN by 0.0 as the former
	is undefined on CentOS 5.

2012-08-15  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/malvern_txt.c (malvern_txt_parse_data): Fixed reading of
	long lines.

2012-08-15  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/columns.c (saxs_reader_columns_count): Allow trailing whitespace.
	* src/malvern_txt.c (malvern_txt_parse_header): New.
	(malvern_txt_parse_data): Improved data reading and handling.
	(malvern_txt_read): Find header, data and footer sections.

2012-08-15  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/atsas_dat.c (atsas_header_txt_read): Allow empty lines.

2012-08-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/csv.c (csv_parse_data): Verify that at least two columns of
	data are available before accepting the input stream.
	* src/atsas_dat.c (atsas_dat_n_column_parse_data): Likewise.
	(atsas_header_txt_read): Verify that all lines contain key-value
	pairs before accepting the input stream.
	* src/malvern_txt.c (malvern_txt_parse_data): Verify that there
	are exactly 10 columns of data are available before accepting
	the input stream.

2012-08-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/saxsdocument_format.h (saxs_document_format): Changed read
	pointer to accept a range of lines instead of a file name.
	* src/saxsdocument.c (saxs_document): Keep a pointer to the lines
	of the document.
	(saxs_document_read): Read and cache the lines, then pass them to
	the format read procedures.
	* src/columns.h (saxs_reader_columns_parse_file): Renamed to ...
	(saxs_reader_columns_parse_lines): ... this. Removed filename
	argument, added a line range instead.
	(saxs_reader_columns_count_file): Removed.
	* src/columns.c (saxs_reader_columns_parse_file): Renamed to ...
	(saxs_reader_columns_parse_lines): ... this. Updated all users.
	(saxs_reader_columns_count_file): Removed.
	* src/cansas_xml.c (cansas_read_callback): New.
	(int cansas_xml_1_0_read): Read lines from line buffers.
	* src/atsas_out.c (atsas_out_read): Error out if document sections
	could not be identified.
	* python/pysaxsdocument.c (saxsdocument_repr): Fixed compiler warnings.

2012-07-25  Daniel Franke  <dfranke@users.sourceforge.net>

	* python/pysaxsdocument.c: Define Py_TYPE if undefined.

2012-07-17  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/csv.c (csv_write_header): New.
	(csv_write_data): New.
	(csv_write): New.
	(saxs_document_format_register_csv): Register csv writer.

2012-07-17  Daniel Franke  <dfranke@users.sourceforge.net>

	* src/malvern_txt.c: New.
	* src/saxsdocument_format.c (saxs_document_format_init): Register
	new format.
	* src/CMakeLists.txt: Added new file.

2012-07-17  Daniel Franke  <dfranke@users.sourceforge.net>

	* python/pysaxsdocument.c (saxsdocument_read): Handle an optional
	'format' argument.
	(PySaxsDocument_Read): Take a 'format' argument, use it to read
	the file.

2012-07-17  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_n_column_write_data): New.
	(saxs_document_format_register_atsas_dat): Register new writer.
	* src/columns.c (lines_printf): Use a temporary buffer to build line
	to avoid artifacts if line buffer is used as argument.

2012-07-03  Daniel Franke  <dfranke@users.sourceforge.net>

        * src/: New subdirectory.
        * *.c, *.h: Moved to subdirectory 'src'.
        * src/CMakeLists.txt: New, removed Fortran bindings.
        * fortran/: New subdirectory.
        * saxsdocument.f90: Moved to ...
        * fortran/fsaxsdocument.f90: ... here.
        * fortran/CMakeLists.txt: New.
	* python/: New subdirectory.
        * CMakeLists.txt: Cleaned out, added new subdirectories.

2012-06-26  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_header): Also parse available key-value 
	pairs in the header.

2012-06-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (extract_line): New.
	(parse_header): Extract full line for run title.
	* columns.c (saxs_reader_columns_count): Lines with trailing
	text are not considered data lines.

2012-05-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (parse_probability_data): Added safe-guard to
	fast-forward to avoid crash on malformed files.
	(atsas_out_read): Verify that we have a .out extension.

2012-05-05  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (parse_header): Also handle 'run title' and
	'real space range'.
	* saxsdocument.f90: Updated SAXS_CURVE_* enumerator to match
	values in saxsdocument.h.

2012-04-11  Daniel Franke  <dfranke@users.sourceforge.net>

        * CMakeLists.txt: Use saxsview-convenience macros.

2012-03-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_header_txt_read): Do not attempt to free lines
	of no lines where read.

2012-03-19  Daniel Franke  <dfranke@users.sourceforge.net>

	* maxlab_rad.c: New.
	* saxsdocument_format.c (saxs_document_format_init): Added new format.
	* CMakeLists.txt: Added new file.

2012-03-10  Daniel Franke  <dfranke@users.sourceforge.net>

	* CMakeLists.txt (saxsdocument): Do not install static link
	libraries on Windows.
	(fsaxsdocument): Properly install static library.

2012-02-22  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_footer): Moved key-value pair
	parsing ...
	(parse_key_value_pair): ... to here.
	(atsas_header_txt_read): New.
	(saxs_document_format_register_atsas_dat): Register new format
	'atsas_header_txt' to parse header files.

2012-02-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_footer): Fixed infinite loop.
	(atsas_dat_write_footer): Skip destinguished header fields.

2012-02-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_footer): Try to make sense out of
	footer lines in various .dat formats.

2012-02-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns.c (lines_printf): Fixed crash on overly long lines.

2012-02-14  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (parse_basic_information): New, extracted from ...
	(atsas_dat_parse_header): ... here.
	(atsas_dat_parse_footer): If basic information wasn't found before,
	try to get it from footer.

2012-02-13  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_header): :Skip leading whitespace
	of code field.

2012-01-24  Al Kikhney  <plmnnk@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_3_column_write_data): Removed intensity 
	positiveness verification. 
	(atsas_dat_4_column_write_data): Likewise.

2011-10-24  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_parse_header): Fixed out of bounds access.

2011-09-28  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_write_footer): Dump all properties to footer.
	(atsas_dat_3_column_write): Check that at least on curve is available,
	not exactly one curve.
	(atsas_dat_4_column_write): Likewise for two.
	(atsas_dat_3_column_write_data): Verify that intensity is greater 0.0,
	drop value if not.
	(atsas_dat_4_column_write_data): Likewise.

2011-09-28  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.c (saxs_document_add_property): Verify that name/value
	are not empty.
	* saxsdocument.f90 (saxs_document_add_property): Now a generic
	interface for ...
	(saxs_document_add_string_property): ... this ...
	(saxs_document_add_int_property): ... this ...
	(saxs_document_add_real_property): and this.

2011-08-05  Al Kikhney  <plmnnk@users.sourceforge.net>

	* atsas_dat.c: "title" property removed. 
	(atsas_dat_parse_header): Read description and concentration from the first
	line.
	(atsas_dat_parse_footer): Try to read same information as in header.
	(atsas_dat_write_header): Write parent(s). 
	Write header even if some of the properties are not present.

2011-08-03  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_fir_fit (atsas_fit_4_column_parse_monsa_data): New.
	(atsas_fit_4_column_parse_data): Moved validity	check to ...
	(atsas_fit_4_column_read): ... here. If a monsa file, call
	specialized parser.

2011-08-01  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns.c (saxs_reader_columns_parse_file): Initialise 'lines' to avoid 
	crash if the input file is not readable.

2011-08-01  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.h: Make sure ENOTSUP is defined.

2011-07-30  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.h: Updated documentation.
	* saxsdocument.c (saxs_document_create): Added error checking.
	(saxs_document_read): Provide a more meaningful error return.
	(saxs_document_write): Likewise.
	* saxsdocument_format.h: Updated documentation.
	* columns.h: Likewise.
	* columns.c (saxs_reader_columns_parse): Verify number of
	columns before attempting to parse them.
	* atsas_dat.c (atsas_dat_parse_header): Fixed typo.
	(atsas_dat_3_column_parse_data): Provide a more meaningful
	error return.
	(atsas_dat_3_column_write): Likewise.
	(atsas_dat_4_column_parse_data): Likewise.
	(atsas_dat_4_column_write): Likewise.
	(atsas_dat_n_column_parse_data): Removed superfluous error check.
	* atsas_fir_fit.c (atsas_fir_4_column_parse_data): Provide a more
	meaningful error return; removed superfluous error checks.
	(atsas_fit_3_column_parse_data): Likewise.
	(atsas_fit_4_column_parse_data): Likewise.
	(atsas_fit_5_column_parse_data): Likewise.
	* atsas_int.c (atsas_int_parse_data): Likewise.
	* atsas_out.c (parse_probability_data): Likewise.
	(atsas_out_read): Provide a more meaningful error return.
	* cansas_xml.c (cansas_xml_1_0_read): Likewise.
	* csv.c (csv_parse_data): Likewise.

2011-07-30  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns.h: Added doxygen documentation.
	* columns.c (lines_create): Added error checking.
	(lines_printf): If the current line is too short, dynamically
	increase line length.
	(lines_read): Provide a more meaningful error return.
	(lines_write): Likewise.
	(saxs_reader_columns_count): Check for NULL lines.
	(columns_parse): Likewise.
	(saxs_reader_columns_count_file): Provide a more meaningful
	error return.
	(saxs_reader_columns_parse_file): Likewise.
	(saxs_writer_columns_write_file): Likewise.

2011-07-30  Daniel Franke  <dfranke@users.sourceforge.net>
            Al Kikhney  <plmnnk@users.sourceforge.net>

	* saxsdocument_format.h (struct saxs_document_format): Removed
	check function; removed all usages.
	(saxs_document_format_find): Renamed to ...
	(saxs_document_format_find_first): ... this.
	(saxs_document_format_find_next): New.
	* saxsdocument_format.c (saxs_document_format_find): Renamed to ...
	(saxs_document_format_find_first): ... this. Updated all users.
	(saxs_document_format_find_next): New.
	* saxsdocument.c (saxs_document_read): Walk potential format
	handler for a file until one successfully read it.
	(saxs_document_write): Likewise for writing.
	* columns.h (struct line): Removed line_number.
	(lines_create): New.
	(lines_printf): New.
	(lines_append): New.
	(lines_write): New.
	(saxs_writer_columns_write_file): New.
	* columns.c (lines_create): New.
	(lines_printf): New.
	(lines_append): New.
	(lines_read): Handle '-' as indicator to read from stdin;
	use new functions.
	(lines_write): New.
	(saxs_reader_columns_parse_file): Improved propagation of error values.
	(saxs_writer_columns_write_file): New.
	* atsas_dat.c (atsas_dat_parse_header): Attempt to extract some values.
	(atsas_dat_write_header): New.
	(atsas_dat_write_footer): New.
	(atsas_dat_3_column_check): Removed.
	(atsas_dat_3_column_parse_data): Check number of available data columns.
	(atsas_dat_3_column_write_data): New.
	(atsas_dat_3_column_write): New.
	(atsas_dat_4_column_check): Removed.
	(atsas_dat_4_column_parse_data): Check number of available data columns.
	(atsas_dat_4_column_write_data): New.
	(atsas_dat_4_column_write): New.
	(atsas_dat_n_column_check): Removed.
	* atsas_fir_fit.c (atsas_fir_4_column_check): Removed.
	(atsas_fir_4_column_parse_data): Check number of available data columns.
	(atsas_fit_3_column_check): Removed.
	(atsas_fit_3_column_parse_data): Check number of available data columns.
	(atsas_fit_4_column_check): Removed.
	(atsas_fit_4_column_parse_data): Check number of available data columns.
	(atsas_fit_5_column_check): Removed.
	(atsas_fit_5_column_parse_data): Check number of available data columns.
	* atsas_int.c (atsas_int_check): Removed.
	(atsas_int_parse_data): Check number of available data columns.
	* atsas_out.c (atsas_out_check): Removed.
	(saxs_document_format_register_atsas_out): Fixed typo in variable name.
	* cansas_xml.c (cansas_xml_1_0_check): Removed.
	(cansas_xml_1_0_read): Check file version.
	* csv.c (csv_check): Removed.
	* saxsproperty.c (saxs_property_find_next): Fixed.
	* saxsdocument.f90 (saxs_document_add_data): Fixed C-binding.

2011-07-27  Al Kikhney  <plmnnk@users.sourceforge.net>

	* atsas_dat.c: Trailing spaces removed.
	* atsas_fir_fit.c: Likewise.
	* atsas_int.c: Likewise.
	* atsas_out.c: Likewise.
	* cansas_xml.c: Likewise.
	* columns.c: Likewise.
	* columns.h: Likewise.
	* csv.c: Likewise.
	* saxsdocument.c: Likewise.
	* saxsdocument.f90: Likewise.
	* saxsdocument.h: Likewise.
	* saxsdocument_format.c: Likewise.
	* saxsdocument_format.h: Likewise.
	* saxsproperty.c: Likewise.
	* saxsproperty.h: Likewise.

2011-07-26  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (atsas_out_read): Handle job type 3 (particle thickness).

2011-07-02  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (atsas_dat_n_column_check): Also accept empty .dat files.

2011-05-21  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (parse_header): Recognize reduced number of points
	in real space.
	(atsas_out_read): Recognize gnom job type 4; cross section of
	rod-like particles.

2011-04-30  Daniel Franke  <dfranke@users.sourceforge.net>

	* csv.c: New.
	* columns.c (issep): New.
	(columns_parse): Include check for likely column separators.
	(saxs_reader_columns_count): Likewise.
	(saxs_reader_columns_parse_file): Check if a valid function pointer
	was provided before calling it.
	* saxsdocument_format.c: Register CSV format.
	* CMakeLists.txt: Added new file.

2011-04-13  Daniel Franke  <dfranke@users.sourceforge.net>

	* CMakeLists.txt: Set library API version to 1 to simplify coexistance
	of multiple versions of the library.

2011-04-13  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.f90: Fixed definition of DBL-kind.

2011-04-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_dat.c (saxs_document_format_register_atsas_dat): Fixed initializer.
	* atsas_fir_fit.c (saxs_document_format_register_atsas_fir_fit): Likewise.
	* atsas_int.c (saxs_document_format_register_atsas_int): Likewise.
	* atsas_out.c (saxs_document_format_register_atsas_out): Likewise.
	* columns.c (lines_read): Fixed signedness of comparisons.

2011-04-08  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.f90: New.
	* CMakeLists.txt: Added Fortran bindings library.

2010-10-23  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_fir_fit.c (atsas_fit_3_column_check): Fixed condition.

2010-10-10  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.h (struct saxs_document_format): Added member
	'extension', updated prototype of 'check' callback; updated all users.
	(saxs_document_format_clear): New.
	* saxsdocument_format.c (saxs_document_format_free): Free extension
	if set.
	(saxs_document_format_register): Copy extension if set.
	(saxs_document_format_clear): New.
	* saxsdocument.h: Updated documentation.
	* columns.h (saxs_reader_columns_count_file): New.
	(saxs_reader_columns_parse_file): New.
	* columns.c (saxs_reader_columns_count_file): New.
	(saxs_reader_columns_parse_file): New.
	* atsas_dat.c (saxs_document_format_register_atsas_dat): Register
	multiple .dat formats.
	(atsas_dat_check): Removed.
	(parse_header): Renamed to ...
	(atsas_dat_parse_header): ... this.
	(parse_data): Removed.
	(parse_footer): Renamed to ...
	(atsas_dat_parse_footer): ... this.
	(atsas_dat_read): Removed.
	(atsas_dat_3_column_parse_data): New.
	(atsas_dat_3_column_check): New.
	(atsas_dat_3_column_read): New.
	(atsas_dat_4_column_parse_data): New.
	(atsas_dat_4_column_check): New.
	(atsas_dat_4_column_read): New.
	(atsas_dat_n_column_parse_data): New.
	(atsas_dat_n_column_check): New.
	(atsas_dat_n_column_read): New.
	(writer_header): Removed.
	(write_data): Removed.
	(atsas_dat_write): Removed.
	* atsas_fir_fit.c (saxs_document_format_register_atsas_fir_fit):
	Register multiple .fir/.fit formats.
	(atsas_fir_fit_check): Removed.
	(parse_header): Renamed to ...
	(atsas_fir_fit_parse_header): ... this.
	(parse_data): Removed.
	(parse_footer): Renamed to ...
	(atsas_fir_fit_parse_footer): ... this.
	(atsas_fir_fit_read): Removed.
	(atsas_fir_4_column_parse_data): New.
	(atsas_fir_4_column_check): New.
	(atsas_fir_4_column_read): New.
	(atsas_fit_3_column_parse_data): New.
	(atsas_fit_3_column_check): New.
	(atsas_fit_3_column_read): New.
	(atsas_fit_4_column_parse_data): New.
	(atsas_fit_4_column_check): New.
	(atsas_fit_4_column_read): New.
	(atsas_fit_5_column_parse_data): New.
	(atsas_fit_5_column_check): New.
	(atsas_fit_5_column_read): New.
	* atsas_int.c
	(parse_header): Renamed to ...
	(atsas_int_parse_header): ... this.
	(parse_data): Renamed to ...
	(atsas_int_parse_data): ... this.
	(parse_footer): Renamed to ...
	(atsas_int_parse_footer): ... this.
	(atsas_int_read): Use new columns convenience function.

2010-08-10  Daniel Franke  <dfranke@users.sourceforge.net>

	* CMakeLists.txt: Display a more detailed message if libxml2
	was not found.

2010-08-02  Daniel Franke  <dfranke@users.sourceforge.net>

	* CMakeLists.txt: Do not install include files.

2010-07-16  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.h (saxs_document_format_next): Fixed prototype.
	* saxsdocument_format.c (saxs_document_format_init): Fixed
	registration of cansas-xml.

2010-06-28  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.h (saxs_document_format_create): New.
	(saxs_document_format_free): New.
	(saxs_document_format_init): New.
	(saxs_document_format_register): New.
	(saxs_document_format_first): New.
	(saxs_document_format_next): New.
	* saxsdocument_format.c (compare_format): Handle NULL-filename.
	(saxs_document_format_create): New.
	(saxs_document_format_free): New.
	(saxs_document_format_init): New.
	(saxs_document_format_register): New.
	(saxs_document_format_first): New.
	(saxs_document_format_next): New.
	* atsas_dat.c (saxs_document_format_register_atsas_dat): New.
	(atsas_dat_check): New.
	(saxs_document_format_atsas_dat): Removed.
	* atsas_fir_fit.c (saxs_document_format_register_atsas_fir_fit): New.
	(atsas_fir_fit_check): New.
	(saxs_document_format_atsas_fir_fit): Removed.
	* atsas_int.c (saxs_document_format_register_atsas_int): New.
	(atsas_int_check): New.
	(saxs_document_format_atsas_int): Removed.
	* atsas_out.c (saxs_document_format_register_atsas_out): New.
	(atsas_out_check): New.
	(saxs_document_format_atsas_out): Removed.
	(parse_scattering_data): Do not skip every second line.
	* cansas_xml.c (saxs_document_format_register_cansas_xml): New.
	(cansas_xml_1_0_check): New.
	(cansas_xml_1_0_write): Removed stub.
	(saxs_document_format_cansas_xml): Removed.

2010-06-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.h: Modified enum to be used as bitfield;
	re-defined SAXS_CURVE_SCATTERING_DATA as combination of
	experimental and theroretical curves.
	* saxsdocument.c: (saxs_document_curve_find): Do not check for
	type match, but bit match.
	(saxs_curve_find_next): Likewise.
	* atsas_dat.c (parse_data): Set curve type according to columns.
	* atsas_fir_fit.c (parse_data): Likewise.
	* atsas_int.c: Likewise.
	* atsas_out.c: Likewise.
	* cansas_xml.c: Likewise.

2009-12-03  Daniel Franke  <dfranke@users.sourceforge.net>

	* atsas_out.c (parse_scattering_data): Parse extrapolated part of
	scattering curve.

2009-10-04  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns_reader.c: Renamed to ...
	* columns.c: ... this.
	* saxsimage_format.h: Moved to ../libsaximage.
	* saxsimage_format.c: Likewise.
	* saxsimage.h: Likewise.
	* saxsimage.c: Likewise.
	* image_cbf.c: Likewise.
	* image_tiff.c: Likewise.
	* CMakeLists.txt: Removed image-related sections.

2009-10-01  Daniel Franke  <dfranke@users.sourceforge.net>

	* cansas_xml.c: (cansas_xml_1_0_process_node): Adjusted version number in
	conditional inclusion of libxml2-workaround.
	(cansas_xml_1_0_read): Likewise.
	(saxs_document_format_cansas_xml): Likewise.

2009-09-27  Daniel Franke  <dfranke@users.sourceforge.net>

	* cansas_xml.c: New.
	* saxsdocument_format.c (saxs_document_format_find): Conditionally
	register cansas-XML format.
	* CMakeLists.txt: Added dependency on libxml2, conditionally compile
	cansas-support if found.

2009-09-23  Daniel Franke  <dfranke@users.sourceforge.net>

	* image_tiff.c: New.
	* libsaxsdocument/saxsimage_format.c (saxs_image_format_find): Conditionally
	register image format TIFF.
	* CMakeLists.txt: Added dependency on TIFF-library, conditionally compile
	TIFF-support if found.

2009-08-24  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.h: Added "extern C" include guards.
	* saxsimage_format.h: Likewise.
	* saxsimage.c (saxs_image_create): Fixed initialization of members.
	(saxs_image_free): only close if format-callbacks are set.

2009-08-24  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsimage_format.h (struct saxs_image_format): Redefined
	callback arguments. Fixed all callers.
	* saxsimage.c (struct saxs_image): Added private data member.
	(saxs_image_create): Initialize private data.
	(saxs_image_free): Plugged memory leak.
	(image_value_min): Performance improvement.
	(image_value_max): Likewise.
	* image_cbf.c: Cleaned out debug messages, updated callback
	prototypes, fixed calls.

2009-08-21  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsimage.h: New.
	* saxsimage.c: New.
	* saxsimage_format.h: New.
	* saxsimage_format.c: New.
	* image_cbf.c: New.
	* CMakeLists.txt: Added new files, link with libcbf.

2009-08-21  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.c: Add missing include file.

2009-08-21  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument_format.h: Add license.

2009-08-21  Daniel Franke  <dfranke@users.sourceforge.net>

	* formats.h: Removed.
	* formats.c: Removed.
	* saxsdocument_format.h: New.
	* saxsdocument_format.c: New.
	* atsas_dat.c (saxs_reader_dat): Renamed to ...
	(atsas_dat_read): ... this.
	(saxs_writer_dat): Renamed to ...
	(atsas_dat_write): ... this.
	(saxs_document_format_atsas_dat): New.
	* atsas_fir_fit.c (saxs_reader_fir_fit): Renamed to ...
	(atsas_fir_fit_read): ... this.
	(saxs_document_format_atsas_fir_fit): New.
	* atsas_int.c (saxs_reader_int): Renamed to ...
	(atsas_int_read): ... this.
	(saxs_document_format_atsas_int): New.
	* atsas_out.c (saxs_reader_out): Renamed to ...
	(atsas_out_read): ... this.
	(saxs_document_format_atsas_out): New.
	* saxsdocument.c (saxs_document_read): Use new format handling.
	(saxs_document_write): Likewise.

2009-08-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* dat_reader.c: Merged with ...
	* dat_writer.c: ... this ...
	* atsas_dat.c: ... into this.
	* fir_fit_reader.c: Renamed to ...
	* atsas_fir_fit.c.c: ... this.
	* int_reader.c: Renamed to ...
	* atsas_int.c: ... this.
	* out_reader.c: Renamed to ...
	* atsas_out.c: ... this.
	* CMakeLists.txt: Renamed files.

2009-08-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsproperty.c (saxs_property_append): Removed.

2009-08-20  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsproperty.h: New.
	* saxsproperty.c: New.
	* saxsdocument.h (struct saxsproperty): Removed.
	(saxs_document_property): Renamed to ...
	(saxs_document_property_first): ... this.
	(saxs_document_property_find): Renamed to ...
	(saxs_document_property_find_first): ... this.
	(saxs_property_next): Removed.
	(saxs_property_find_next): Removed.
	(saxs_property_name): Removed.
	(saxs_property_name): Removed.
	* saxsdocument.c (saxs_document_create): Use property list API
	instead of rolling own version.
	(saxs_document_property_first): Likewise.
	(saxs_document_property_find_first): Likewise.
	(saxs_document_add_property): Likewise.
	(saxs_property_next): Removed.
	(saxs_property_find_next): Removed.
	(saxs_property_name): Removed.
	(saxs_property_name): Removed.
	* dat_writer.c (write_header): Adjusted to changed interface.
	* CMakeLists.txt: Added new files.

2009-08-18  Daniel Franke  <dfranke@users.sourceforge.net>

	* saxsdocument.h: Added some doxygen-style documentation.

2009-08-10  Daniel Franke  <dfranke@users.sourceforge.net>

	* columns_reader.c (lines_read): Fixed invalid read
	on long first lines.

2009-08-09  Daniel Franke  <dfranke@users.sourceforge.net>

	* Initial import.
